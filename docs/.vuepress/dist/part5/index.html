<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Curry and Partial Application</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css" as="style"><link rel="preload" href="/real-world-functional-programming-book/assets/js/app.4ecaf7cf.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/2.6da8cf3d.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/39.204af450.js" as="script"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/10.94dd7f8c.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/11.698c5c4f.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/12.192a3ae6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/13.8386adfa.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/14.25c778d2.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/15.62d54e5a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/16.8f2a7f1e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/17.749ab795.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/18.ec23f3ec.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/19.9ba81683.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/20.70969485.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/21.7bc06d56.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/22.dd9d45d7.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/23.f2ad21f6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/24.80f0959b.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/25.6e62b877.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/26.bec311ec.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/27.110f94a9.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/28.829fb020.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/29.f5b667c7.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/3.51c6a686.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/30.bb7984c5.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/31.9b135bc8.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/32.4c26d247.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/33.5c022cb2.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/34.b4468fe6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/35.a6519809.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/36.7dcb1e29.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/37.3980ad09.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/38.2eece47a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/4.80637c28.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/40.4224b6ca.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/41.47e1ccf5.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/42.ef4aaae1.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/43.927896fc.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/44.0e25a484.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/45.be50f1de.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/46.a6b52ac4.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/47.c9bcfbeb.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/48.9e11dca4.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/49.622efaaa.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/5.dd0514ea.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/50.07cb6d56.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/51.256e2d8e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/52.a61ac66a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/53.38837102.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/54.65632715.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/55.7558152f.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/56.632c19bc.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/57.44da2b00.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/58.5eeb983d.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/59.df5acc69.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/6.cd1d47c7.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/60.d35389d5.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/61.309602f9.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/62.0d8a9263.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/63.bc1b30ad.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/64.c2cc4933.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/65.7d2bfbda.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/66.c2ec34a8.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/7.603220b3.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/8.74213919.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/9.997a717b.js">
    <link rel="stylesheet" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/real-world-functional-programming-book/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/real-world-functional-programming-book/" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part1/" class="sidebar-heading clickable"><span>Part 1: Pure Functions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part2/" class="sidebar-heading clickable"><span>Part 2: Getting and Setting Data</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part3/" class="sidebar-heading clickable"><span>Part 3: List Comprehensions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part4/" class="sidebar-heading clickable"><span>Part 4: Basic Function Composition</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part5/" class="sidebar-heading clickable router-link-exact-active router-link-active active"><span>Part 5: Curry and Partial Applications</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part6/" class="sidebar-heading clickable"><span>Part 6: Algebraic Data Types</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part7/" class="sidebar-heading clickable"><span>Part 7: Optics</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part8/" class="sidebar-heading clickable"><span>Part 8: Debugging</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part9/" class="sidebar-heading clickable"><span>Part 9: Testing</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="curry-and-partial-application"><a href="#curry-and-partial-application" class="header-anchor">#</a> Curry and Partial Application</h1> <p><em>Warning</em>: This chapter makes no sense unless you understand how to compose pure functions together. If you don't know what that means, go read <a href="../part4">Part 4: Composing Functions</a>.</p> <p>Currying, or function currying, is when you make all functions take 1 argument. It's named after the guy who invented the technique, <a href="https://en.wikipedia.org/wiki/Haskell_Curry" target="_blank" rel="noopener noreferrer">Haskell Brooks Curry<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Currying functions is done so they're easier and more flexible to compose. Function currying was originally created to make functions easier to work in math equations. In real world functional programming, you use them to:</p> <ul><li>shorten how many arguments a function requires</li> <li>write less code</li> <li>create reusable functions from other functions</li> <li>write in point free style</li> <li>expose useful functions for developers using our code</li> <li>make it easier to create partial applications so you can more easily compose functions</li></ul> <p>Curried functions are used in 2 ways:</p> <ol><li>you call the curried function with all the arguments, you just use parentehsis instead of commas (i.e. <code>getSearchURL('pizza', 'dev')</code>)</li> <li>you call the curried function with some arguments, and use the returned function elsewhere. (i.e. <code>getSearchURL('pizza')</code>)</li></ol> <h2 id="how-you-do-it"><a href="#how-you-do-it" class="header-anchor">#</a> How You Do It</h2> <p>Here we have a function that takes an environment such as development, staging, and production as well as a query parameter. Using both, we'll construct a URL for doing text searches. This ensures the code will work across environments, typically the <code>environment</code> part coming from an environment variable like <code>process.env.NODE_ENV</code> in Node.js.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">getSearchURL</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">query<span class="token punctuation">,</span> environment</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>environment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-server.com/search?query=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>You'd normally call it with either the QA or Prod enivronments:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">getSearchURL</span><span class="token punctuation">(</span><span class="token string">'pizza'</span><span class="token punctuation">,</span> <span class="token string">'dev'</span><span class="token punctuation">)</span> <span class="token comment">// https://dev-server.com/search?query=pizza</span>
<span class="token function">getSearchURL</span><span class="token punctuation">(</span><span class="token string">'chicken'</span><span class="token punctuation">,</span> <span class="token string">'prod'</span><span class="token punctuation">)</span> <span class="token comment">// https://prod-server.com/search?query=chicken</span>
</code></pre></div><p>To curry our above function, each function must take 1 parameter. Since our <code>getSearchURL</code> takes 2 parameters, we instead need to have it return a function for the first parameter. We can do that with a slight syntax change using arrow functions:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">getSearchURL</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">environment</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>environment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-server.com/search?query=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>If you're not used to writing short arrow functions, it can be unclear what is going on, so let's show the same thing using function declaration syntax:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getSearchURL</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">environment</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>environment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-server.com/search?query=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Whichever version you use, you call it slightly differently than a normal function call:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">getSearchURL</span><span class="token punctuation">(</span><span class="token string">'pizza'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'dev'</span><span class="token punctuation">)</span> <span class="token comment">// https://dev-server.com/search?query=pizza</span>
<span class="token function">getSearchURL</span><span class="token punctuation">(</span><span class="token string">'chicken'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'prod'</span><span class="token punctuation">)</span> <span class="token comment">// https://prod-server.com/search?query=chicken</span>
</code></pre></div><p>It's subtle; if you missed it, it's <code>getSearchURL('pizza')('dev')</code> instead of <code>getSearchURL('pizza', 'dev')</code>. An imperative version of the above:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> searchPizza <span class="token operator">=</span> <span class="token function">getSearchURL</span><span class="token punctuation">(</span><span class="token string">'pizza'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> searchPizzaOnDevResult <span class="token operator">=</span> <span class="token function">searchPizza</span><span class="token punctuation">(</span><span class="token string">'dev'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>searchPizzaOnDevResult<span class="token punctuation">)</span> <span class="token comment">// https://dev-server.com/search?query=pizza</span>

<span class="token keyword">const</span> searchChicken <span class="token operator">=</span> <span class="token function">getSearchURL</span><span class="token punctuation">(</span><span class="token string">'chicken'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> searchChickenOnProdresult <span class="token operator">=</span>  <span class="token function">searchChicken</span><span class="token punctuation">(</span><span class="token string">'prod'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>searchChickenOnProdresult<span class="token punctuation">)</span> <span class="token comment">// https://prod-server.com/search?query=chicken</span>
</code></pre></div><h2 id="why-are-we-doing-this"><a href="#why-are-we-doing-this" class="header-anchor">#</a> Why Are We Doing This?</h2> <p>Currying can make composing easier with less code that is sometimes reusable by allowing to not have to wrap functions just to simplify their arguments. Let's revist the composition in the last chapter. We had 4 functions to parse some people JSON string into a list of formatted names.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>parsePeople<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>filterHumans<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>formatNames<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>startCaseNames<span class="token punctuation">)</span>
</code></pre></div><h2 id="non-curried-pipeline"><a href="#non-curried-pipeline" class="header-anchor">#</a> Non-Curried Pipeline</h2> <p>Instead of making a bunch of predicate functions and then assembling together, let's instead do it all in 1 function. We'll build it one at a time. The only change in implementation is</p> <p>First, parsing the people and dog JSON string to an Array:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
                <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
</code></pre></div><p>Next, filtering out the dog and only keeping the humans:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
                <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">peeps</span> <span class="token operator">=&gt;</span>
                peeps<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
                    <span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                        person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
</code></pre></div><p>Next, take the humans and strip off their first and last name into a full name in a string:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
                <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">peeps</span> <span class="token operator">=&gt;</span>
                peeps<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
                    <span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                        person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">humans</span> <span class="token operator">=&gt;</span>
                humans<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
                    <span class="token parameter">human</span> <span class="token operator">=&gt;</span>
                    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
</code></pre></div><p>Finally, we'll fix the capitalization for their first and last name to ensure the first letter is uppercase:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
                <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">peeps</span> <span class="token operator">=&gt;</span>
                peeps<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
                    <span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                        person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">humans</span> <span class="token operator">=&gt;</span>
                humans<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
                    <span class="token parameter">human</span> <span class="token operator">=&gt;</span>
                    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">names</span> <span class="token operator">=&gt;</span>
                names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
                    startCase
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
</code></pre></div><p>The above function is the same from the previous chapter, just self-contained. There are no functions defined elsewhere. Each <code>then</code> has the pure function it needs to take a single output, and return a value for the next function in the chain.</p> <h2 id="too-many-functions"><a href="#too-many-functions" class="header-anchor">#</a> Too Many Functions</h2> <p>The <code>JSON.parse</code> is super easy to integrate because it has 1 argument. Because JavaScript is an untyped language, the whole point of that function is simply for readability:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
        <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>That reads &quot;Yo, whenever the Promise is done, I'll get a string. We'll take it, throw it into the JSON parser fun wagon, and whatever comes out, you'll get!&quot;</p> <p>The same thing can be shortened, without the extra, un-needed function like so:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">)</span>
</code></pre></div><p>That results in a modified pipeline that looks like:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">peeps</span> <span class="token operator">=&gt;</span>
                peeps<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
                    <span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                        person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">humans</span> <span class="token operator">=&gt;</span>
                humans<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
                    <span class="token parameter">human</span> <span class="token operator">=&gt;</span>
                    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">names</span> <span class="token operator">=&gt;</span>
                names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
                    startCase
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
</code></pre></div><p>Let's keep going to shrink her further using function currying.</p> <h2 id="curried-filter"><a href="#curried-filter" class="header-anchor">#</a> Curried Filter</h2> <p>To shrink things further, we have to whip out the curry. To do that, we cannot utilize the built in <code>Array.filter</code> method. Instead, we'll write our own.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">filter</span> <span class="token operator">=</span> <span class="token parameter">predicate</span> <span class="token operator">=&gt;</span> <span class="token parameter">array</span> <span class="token operator">=&gt;</span>
    array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>predicate<span class="token punctuation">)</span>
</code></pre></div><p>A normal Array filter method is like this, only gimme the humans:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>peeps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span><span class="token string">'Human'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span><span class="token string">'Jesse'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span><span class="token string">'dog'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span><span class="token string">'Albus'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
peeps<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
    <span class="token parameter">peep</span> <span class="token operator">=&gt;</span>
        peep<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span>
<span class="token punctuation">)</span>
<span class="token comment">// { type:'Human', name:'Jesse' }</span>
</code></pre></div><p>Using our curry wrapper, we can do the same thing. First parameter takes a predicate function, the second takes an Array:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token function">filter</span>
    <span class="token punctuation">(</span><span class="token parameter">peep</span> <span class="token operator">=&gt;</span>
        peep<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span>peeps<span class="token punctuation">)</span>
<span class="token operator">...</span>
</code></pre></div><p>Using the above on the same data:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>peeps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span><span class="token string">'Human'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span><span class="token string">'Jesse'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span><span class="token string">'dog'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span><span class="token string">'Albus'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
result <span class="token operator">=</span> <span class="token function">filter</span>
            <span class="token punctuation">(</span><span class="token parameter">peep</span> <span class="token operator">=&gt;</span>
                peep<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span>peeps<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// { type:'Human', name:'Jesse' }</span>
</code></pre></div><p>Ok, that's if we supply 2 parameters; what happens if we supply 1?</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>watThis <span class="token operator">=</span> <span class="token function">filter</span>
    <span class="token punctuation">(</span><span class="token parameter">peep</span> <span class="token operator">=&gt;</span>
        peep<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>watThis<span class="token punctuation">)</span> <span class="token comment">// [Function (anonymous)]</span>
</code></pre></div><p>A function. This function should take an Array that filters out humans:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">whatThis</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span><span class="token string">'Human'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Jesse'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span><span class="token string">'Cow'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span><span class="token string">'Dude'</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// [ { type: 'Human', name: 'Jesse' } ]</span>
</code></pre></div><p>Cool, so that means that is the same as:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">filter</span>
    <span class="token punctuation">(</span><span class="token parameter">peep</span> <span class="token operator">=&gt;</span>
        peep<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span><span class="token string">'Human'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Jesse'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span><span class="token string">'Cow'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span><span class="token string">'Dude'</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// [ { type: 'Human', name: 'Jesse' } ]</span>
</code></pre></div><p>Get it? Give it 1 parameter, it'll return a function. Give it 2, it'll return the filtered Array. Give it 1 parameter which is a predicate function, it'll return a funtion awaiting an Array. Use that returned function with 1 Array parameter, it'll do the work and give you the filtered Array back. Use it with 2 parameters, the first being a predicate function, the second being an Array, it'll do the work and give you the filtered Array back.</p> <h2 id="using-curried-filter"><a href="#using-curried-filter" class="header-anchor">#</a> Using Curried Filter</h2> <p>Now that we grok how our curried filter function works and the 2 ways to call it, let's take the old filter:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">peeps</span> <span class="token operator">=&gt;</span>
        peeps<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
            <span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span>
        <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>And replace it with our curried one:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">peeps</span> <span class="token operator">=&gt;</span>
        <span class="token function">filter</span>
            <span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                    person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span>peeps<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Notice the duplicated <code>peeps</code>, however, this is key. All <code>Promise.then</code> take a function that takes only 1 input and expects an output. It just so happens our curried function does that if you only give it 1 parameter. We only need to give it the predicate, the <code>Promise.then</code> will give it the <code>peeps</code> Array. Refer to the <code>JSON.parse</code> example above for the exact same technique. Let's shrink it by removing the extra, un-needed function, and the 2nd parameter:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token function">filter</span>
        <span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Remember, <code>filter(predicate)</code> returns a function that's expecting 1 parameter, an Array, and will give you an Array back. Above, <code>filter(predicte)</code> returns a function, and the <code>Promise.then</code> holds onto it and says &quot;Thank you, when I get a peeps Array, I'll give it to you. Whatever you return back, I'll give the next <code>.then</code>&quot;.</p> <p>Our final function looks like:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token function">filter</span><span class="token punctuation">(</span>
                <span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                    person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">humans</span> <span class="token operator">=&gt;</span>
                humans<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
                    <span class="token parameter">human</span> <span class="token operator">=&gt;</span>
                    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">names</span> <span class="token operator">=&gt;</span>
                names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
                    startCase
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
</code></pre></div><h2 id="curried-map"><a href="#curried-map" class="header-anchor">#</a> Curried Map</h2> <p>Let's wrap <code>Array.map</code> the same way:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">map</span> <span class="token operator">=</span> <span class="token parameter">convert</span> <span class="token operator">=&gt;</span> <span class="token parameter">array</span> <span class="token operator">=&gt;</span>
    array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>convert<span class="token punctuation">)</span>
</code></pre></div><p>For context, here was the old <code>formatNames</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>names <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> firstName<span class="token punctuation">:</span> <span class="token string">'jesse'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">'warden'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token punctuation">:</span> <span class="token string">'brandy'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">'fortune'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
    <span class="token parameter">name</span> <span class="token operator">=&gt;</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">)</span>
<span class="token comment">// [ 'jesse warden', 'brandy fortune' ]</span>
</code></pre></div><p>And here's the curried version doing the same thing:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>names <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> firstName<span class="token punctuation">:</span> <span class="token string">'jesse'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">'warden'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> firstName<span class="token punctuation">:</span> <span class="token string">'brandy'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token string">'fortune'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
    <span class="token parameter">name</span> <span class="token operator">=&gt;</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">)</span>
<span class="token comment">// [ 'jesse warden', 'brandy fortune' ]</span>
</code></pre></div><p>We'll replace the first map:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">humans</span> <span class="token operator">=&gt;</span>
        humans<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
            <span class="token parameter">human</span> <span class="token operator">=&gt;</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>With our curried one:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">humans</span> <span class="token operator">=&gt;</span>
        <span class="token function">map</span>
            <span class="token punctuation">(</span><span class="token parameter">human</span> <span class="token operator">=&gt;</span>
                <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span>humans<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Then we'll remove the extra, un-needed function and the 2nd parameter:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token function">map</span>
        <span class="token punctuation">(</span><span class="token parameter">human</span> <span class="token operator">=&gt;</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Now our parse function looks like:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token function">filter</span>
                <span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                    person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token function">map</span>
                <span class="token punctuation">(</span><span class="token parameter">human</span> <span class="token operator">=&gt;</span>
                    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token parameter">names</span> <span class="token operator">=&gt;</span>
                names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
                    startCase
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
</code></pre></div><h2 id="one-more-time"><a href="#one-more-time" class="header-anchor">#</a> One More Time</h2> <p>The last <code>map</code> that fixes the capitalization of the names, since we already created a curried <code>map</code> function, we can use again here and change:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">names</span> <span class="token operator">=&gt;</span>
        names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
            startCase
        <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>To a curried version:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">names</span> <span class="token operator">=&gt;</span>
        <span class="token function">map</span>
            <span class="token punctuation">(</span>startCase<span class="token punctuation">)</span>
            <span class="token punctuation">(</span>names<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>And then get rid of the un-needed function, and the 2nd names parameter:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token function">map</span>
        <span class="token punctuation">(</span>startCase<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>That leaves our parsing function looking like:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token function">filter</span>
                <span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token operator">=&gt;</span>
                    person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token function">map</span>
                <span class="token punctuation">(</span><span class="token parameter">human</span> <span class="token operator">=&gt;</span>
                    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token function">map</span>
                <span class="token punctuation">(</span>startCase<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
</code></pre></div><p>If you don't like whitespace like I do and want to smoosh it together, you can re-write it like:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">human</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token function">map</span><span class="token punctuation">(</span>startCase<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Be aware, <a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">Prettier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, the popular code formatter, favors more of the smooshing and doesn't really support the Lisp-like way of writing JavaScript curried functions shown above. Also, as your JavaScript starts to look more like Lisp/Closure, you may start to get lost lining up all the parenthesis. The <a href="https://github.com/CoenraadS/Bracket-Pair-Colorizer-2" target="_blank" rel="noopener noreferrer">Bracket Colorizer v2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> plugin for <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VSCode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> can help. While marketed at brackets, something you'll use a lot less in Functional Programming, it helps a lot colorizing your parentheses to help you visualize what paren goes with what.</p> <h2 id="using-with-the-pipeline-operator"><a href="#using-with-the-pipeline-operator" class="header-anchor">#</a> Using With The Pipeline Operator</h2> <p>Many functional languages have pipeline syntax, and JavaScript is no exception. From the previous chapter, the <a href="https://github.com/tc39/proposal-pipeline-operator" target="_blank" rel="noopener noreferrer">pipeline operator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> has a proposal, and you can use via Babel. Below is the Promise, uncurried pipeline, in smooshed together format:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token parameter">peeps</span> <span class="token operator">=&gt;</span> peeps<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
    <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token parameter">humans</span> <span class="token operator">=&gt;</span> humans<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">human</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token parameter">names</span> <span class="token operator">=&gt;</span> names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>startCase<span class="token punctuation">)</span>
</code></pre></div><p>And here's the equivalent curried version smooshed together:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parsePeopleNames</span> <span class="token operator">=</span> <span class="token parameter">str</span> <span class="token operator">=&gt;</span>
    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token operator">=&gt;</span> person<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'Human'</span><span class="token punctuation">)</span>
    <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">human</span> <span class="token operator">=&gt;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>human<span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token operator">|</span><span class="token operator">&gt;</span> <span class="token function">map</span><span class="token punctuation">(</span>startCase<span class="token punctuation">)</span>
</code></pre></div><p>I think here is where curry really shines, and shows why other functional languages have adopted this operator.</p> <h2 id="conclusions"><a href="#conclusions" class="header-anchor">#</a> Conclusions</h2> <p>Curried functions are functions that take multiple arguments and only when the last argument is supplied does the function do any work. Each argument returns a funtion with that argumented stored and ready to go. You cannot have a curried function with 1 argument. The arguments are typically stored in function closures. You either call them with all arguments to get a value, or some and use the returned function later.</p> <p>We've shown above how you can utilize curried functions to drastically reduce how much code you need to write, and how it contributes to code re-use. If you come from a statically typed language, you can see how it's quite hard to know what the curried function is returning. This means you either have to memorize what the types of the inputs are, memorize the methods and their argument order, and/or run the code with logging to see what happens. Par for the course in dynamic languages.</p> <p>The techniques above are manual currying using arrow functions for their automatic return values and lightweight syntax that is easier to read than function declarations in function currying. However, as you'll see in future chapters, you do not have to manually write them. Many libraries provie helper methods that can curry existing code. In addition, they give you flexibility, allowing you to call the functions in a curried fashion, or the old fashion way, or both. This helps when you're learning, using non-FP code, or exposing libraries to non-FP developers.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/real-world-functional-programming-book/assets/js/app.4ecaf7cf.js" defer></script><script src="/real-world-functional-programming-book/assets/js/2.6da8cf3d.js" defer></script><script src="/real-world-functional-programming-book/assets/js/39.204af450.js" defer></script>
  </body>
</html>

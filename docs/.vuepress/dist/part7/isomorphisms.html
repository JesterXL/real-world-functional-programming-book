<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Isomorphisms</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css" as="style"><link rel="preload" href="/real-world-functional-programming-book/assets/js/app.4ecaf7cf.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/2.6da8cf3d.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/58.5eeb983d.js" as="script"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/10.94dd7f8c.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/11.698c5c4f.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/12.192a3ae6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/13.8386adfa.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/14.25c778d2.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/15.62d54e5a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/16.8f2a7f1e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/17.749ab795.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/18.ec23f3ec.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/19.9ba81683.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/20.70969485.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/21.7bc06d56.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/22.dd9d45d7.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/23.f2ad21f6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/24.80f0959b.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/25.6e62b877.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/26.bec311ec.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/27.110f94a9.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/28.829fb020.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/29.f5b667c7.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/3.51c6a686.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/30.bb7984c5.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/31.9b135bc8.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/32.4c26d247.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/33.5c022cb2.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/34.b4468fe6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/35.a6519809.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/36.7dcb1e29.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/37.3980ad09.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/38.2eece47a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/39.204af450.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/4.80637c28.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/40.4224b6ca.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/41.47e1ccf5.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/42.ef4aaae1.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/43.927896fc.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/44.0e25a484.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/45.be50f1de.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/46.a6b52ac4.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/47.c9bcfbeb.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/48.9e11dca4.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/49.622efaaa.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/5.dd0514ea.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/50.07cb6d56.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/51.256e2d8e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/52.a61ac66a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/53.38837102.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/54.65632715.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/55.7558152f.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/56.632c19bc.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/57.44da2b00.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/59.df5acc69.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/6.cd1d47c7.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/60.d35389d5.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/61.309602f9.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/62.0d8a9263.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/63.bc1b30ad.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/64.c2cc4933.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/65.7d2bfbda.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/66.c2ec34a8.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/7.603220b3.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/8.74213919.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/9.997a717b.js">
    <link rel="stylesheet" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/real-world-functional-programming-book/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/real-world-functional-programming-book/" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part1/" class="sidebar-heading clickable"><span>Part 1: Pure Functions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part2/" class="sidebar-heading clickable"><span>Part 2: Getting and Setting Data</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part3/" class="sidebar-heading clickable"><span>Part 3: List Comprehensions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part4/" class="sidebar-heading clickable"><span>Part 4: Basic Function Composition</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part5/" class="sidebar-heading clickable"><span>Part 5: Curry and Partial Applications</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part6/" class="sidebar-heading clickable"><span>Part 6: Algebraic Data Types</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part7/" class="sidebar-heading clickable router-link-active open"><span>Part 7: Optics</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/real-world-functional-programming-book/part7/isomorphisms.html" class="active sidebar-link">Isomorphisms</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part7/isomorphisms.html#basic-set" class="sidebar-link">Basic Set</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part7/isomorphisms.html#basic-isomorphism" class="sidebar-link">Basic Isomorphism</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part7/isomorphisms.html#conclusions" class="sidebar-link">Conclusions</a></li></ul></li><li><a href="/real-world-functional-programming-book/part7/prisms.html" class="sidebar-link">Prisms</a></li><li><a href="/real-world-functional-programming-book/part7/composing_lenses.html" class="sidebar-link">Composing Lenses</a></li><li><a href="/real-world-functional-programming-book/part7/custom_lens.html" class="sidebar-link">Creating a Custom Lens</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part8/" class="sidebar-heading clickable"><span>Part 8: Debugging</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part9/" class="sidebar-heading clickable"><span>Part 9: Testing</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="isomorphisms"><a href="#isomorphisms" class="header-anchor">#</a> Isomorphisms</h1> <p>If a thing can change into something different, but then change back, then those two things are isomorphic.</p> <p>One example is JSON. You can have a JSON string that turns into a JSON Object via <code>JSON.parse</code>, but then can turn back into the exact same string again via <code>JSON.stringify</code>. In working with legacy systems such as <a href="https://en.wikipedia.org/wiki/SOAP" target="_blank" rel="noopener noreferrer">XML SOAP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> we'll often convert those large XML structures to JSON, and then back again to XML SOAP. If you're familiar with the <a href="https://en.wikipedia.org/wiki/Memento_pattern" target="_blank" rel="noopener noreferrer">Memento Design Pattern<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, it's kind of like that.</p> <p>If you're building a game and want to save it, you'll typically implement the Memento design pattern to create a small <code>Object</code> that represents the game state as it is right now, and then write that to disk as a file, and possibly sync to a cloud server as well. When loading the game, that <code>Object</code> has all the information you need to load the correct level, character stats, and place in the story the player should resume at.</p> <p>The only thing that isn't deterministic about save games is the date they were created. Most games will sort the save games by latest so when you click &quot;Continue&quot;, it'll load your latest saved game. This includes games that have an Autosave feature. When you save a new game, it'll make that the latest save by updating the date to &quot;right now&quot;.</p> <p>We can implement this feature as purely as possible using lenses to give you an example of using isomorphisms in practice. Below we'll walk through saving a game and then loading a save game below using the <a href="https://github.com/yelouafi/focused" target="_blank" rel="noopener noreferrer">Focused<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library as it has support for isomorphisms and an easier way to compose lenses together.</p> <p>Be aware Focused has 2 ways to use it; using the facade api which is magic af, or the explicit API which looks a lot more like [Ramda]. We'll show both, although the proxy option is one of <code>focused</code>'s selling points over Ramda for advanced Optics. Also note most functions in <code>focused</code> are curried by default and support the regular function way of calling them (<code>set(lens, value, object)</code>) as well as a single argument per function cal (<code>set(lens)(value)(object)</code>).</p> <h2 id="basic-set"><a href="#basic-set" class="header-anchor">#</a> Basic Set</h2> <p>Our game object looks like so, containing where the player is in the game's story, the map location, x and y tile coordinates, and the current protagonists in the party with their inventory.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> gameState <span class="token operator">=</span> <span class="token punctuation">{</span>
    saveDate<span class="token punctuation">:</span> <span class="token string">'2018-11-24T18:27:08.950Z'</span><span class="token punctuation">,</span>
    map<span class="token punctuation">:</span> <span class="token string">'overworld'</span><span class="token punctuation">,</span>
    chapter<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    location<span class="token punctuation">:</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">323</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">422</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    characters<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'Jesse'</span><span class="token punctuation">,</span>
            level<span class="token punctuation">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
            attack<span class="token punctuation">:</span> <span class="token number">510</span><span class="token punctuation">,</span>
            magic<span class="token punctuation">:</span> <span class="token number">122</span><span class="token punctuation">,</span>
            inventory<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    name<span class="token punctuation">:</span> <span class="token string">'Scimitar'</span><span class="token punctuation">,</span>
                    power<span class="token punctuation">:</span> <span class="token number">3</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    name<span class="token punctuation">:</span> <span class="token string">'Mithral Glove'</span><span class="token punctuation">,</span>
                    defense<span class="token punctuation">:</span> <span class="token number">21</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'Brandy'</span><span class="token punctuation">,</span>
            level<span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
            attack<span class="token punctuation">:</span> <span class="token number">501</span><span class="token punctuation">,</span>
            magic<span class="token punctuation">:</span> <span class="token number">210</span><span class="token punctuation">,</span>
            inventory<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    name<span class="token punctuation">:</span> <span class="token string">'Green Rod'</span><span class="token punctuation">,</span>
                    magic<span class="token punctuation">:</span> <span class="token number">19</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    name<span class="token punctuation">:</span> <span class="token string">'White Cape'</span><span class="token punctuation">,</span>
                    defense<span class="token punctuation">:</span> <span class="token number">11</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>First, we need to import focused's proxy. Like how some developers use Lodash, they'll assign it to an underscore to make it small and easy to use:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> lensProxy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'focused'</span>

<span class="token keyword">const</span> _ <span class="token operator">=</span> <span class="token function">lensProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Next, let's import <code>set</code> to update our <code>Object</code> much like we'd do in Lodash or Ramda. Notice, however, the use of <code>_</code> and dotting properties; that is how you create a basic <code>prop</code> or <code>get</code> lens using Focused's proxy api. Specifically the <code>_.saveDate</code> below would be <code>get('saveDate')</code> in Lodash:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token punctuation">,</span> <span class="token keyword">set</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'focused'</span>

<span class="token keyword">const</span> updated <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span>saveDate<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> gameState<span class="token punctuation">)</span>
</code></pre></div><p>If we log out <code>updated</code>, you'll see she works just like <a href="/real-world-functional-programming-book/part2/set.html">a set in Lodash</a> and gives you back a new Object with the <code>saveDate</code> to whatever time it is right now:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> saveDate<span class="token punctuation">:</span> <span class="token string">'2018-11-25T18:17:44.214Z'</span><span class="token punctuation">,</span>
  map<span class="token punctuation">:</span> <span class="token string">'overworld'</span><span class="token punctuation">,</span>
  chapter<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
</code></pre></div><h2 id="basic-isomorphism"><a href="#basic-isomorphism" class="header-anchor">#</a> Basic Isomorphism</h2> <p>However, the game object is often read from disk as text. Meaning, you'd have to parse it using <code>JSON.parse</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> readFileSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span>

<span class="token keyword">const</span> savedGameString <span class="token operator">=</span> <span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'savedgame.json'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> gameState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>savedGameString<span class="token punctuation">)</span>
</code></pre></div><p>Then make your changes and convert it back to text using <code>JSON.stringify</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> updated <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span>saveDate<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> gameState<span class="token punctuation">)</span>
<span class="token keyword">const</span> gameStateString <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>updated<span class="token punctuation">)</span>
</code></pre></div><p>Converting data back and forth is so common, like <code>map</code>, that Focused has an Isomorphism function called <code>iso</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token punctuation">,</span> iso <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'focused'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> jsonISO <span class="token operator">=</span> <span class="token function">iso</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span>parse<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span>stringify<span class="token punctuation">)</span>
</code></pre></div><p>Now, we can collapse those 3 lines of code above to:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> savedGameString <span class="token operator">=</span> <span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'savedgame.json'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> updatedString <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span>jsonISO<span class="token punctuation">)</span><span class="token punctuation">.</span>saveDate<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> savedGameString<span class="token punctuation">)</span>
</code></pre></div><p>Logging out the <code>updatedString</code> string, it looks like:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> <span class="token property">&quot;saveDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2018-11-25T18:51:09.227Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;map&quot;</span><span class="token operator">:</span> <span class="token string">&quot;overworld&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;chapter&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    ...
</code></pre></div><h2 id="conclusions"><a href="#conclusions" class="header-anchor">#</a> Conclusions</h2> <p>Isomorphisms are used when you convert data back and forth. It happens often in places like Orchestration API's where you have a <a href="https://samnewman.io/patterns/architectural/bff/" target="_blank" rel="noopener noreferrer">back-end for your front-end<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The Node API will call a SOAP service and translate the XML to JSON. If the user does something that we need to update in the back-end, we'll convert the JSON from the front-end application to XML and call the SOAP service again. Reading and writing JSON files to disk like in the above save game example is another. I've used it at work to update the <code>proxy</code> url in <code>package.json</code> for <a href="https://facebook.github.io/create-react-app/docs/proxying-api-requests-in-development" target="_blank" rel="noopener noreferrer">Create React App's proxy feature<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> since we have multiple environments. If you're dealing with any relational databases, this pattern <a href="https://enterprisecraftsmanship.com/2016/11/03/oop-fp-and-object-relational-impedance-mismatch/" target="_blank" rel="noopener noreferrer">can also help you a lot there<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/real-world-functional-programming-book/part6/union.html" class="prev">Union</a></span> <span class="next"><a href="/real-world-functional-programming-book/part7/prisms.html">Prisms</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/real-world-functional-programming-book/assets/js/app.4ecaf7cf.js" defer></script><script src="/real-world-functional-programming-book/assets/js/2.6da8cf3d.js" defer></script><script src="/real-world-functional-programming-book/assets/js/58.5eeb983d.js" defer></script>
  </body>
</html>

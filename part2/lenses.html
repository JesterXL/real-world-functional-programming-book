<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Optic Basics: Lenses</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css" as="style"><link rel="preload" href="/real-world-functional-programming-book/assets/js/app.0715a213.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/2.6da8cf3d.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/23.f2ad21f6.js" as="script"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/10.8e744d24.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/11.535cdb22.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/12.838cba83.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/13.8386adfa.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/14.25c778d2.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/15.62d54e5a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/16.8f2a7f1e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/17.96c3770c.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/18.8649aee6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/19.8e0a8ed3.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/20.5ad4bd07.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/21.7bc06d56.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/22.dd9d45d7.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/24.80f0959b.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/25.6e62b877.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/26.bec311ec.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/27.110f94a9.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/28.44066332.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/29.f824763d.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/3.51c6a686.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/30.bb7984c5.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/31.9b135bc8.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/32.4c26d247.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/33.5c022cb2.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/34.b4468fe6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/35.a6519809.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/36.7dcb1e29.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/37.3980ad09.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/38.2eece47a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/39.204af450.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/4.80637c28.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/40.4224b6ca.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/41.bc8d9404.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/42.e1e07aee.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/43.2d3e2472.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/44.f4445baf.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/45.b3d3ce23.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/46.bdf14109.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/47.cc2f20d7.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/48.7472b4b0.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/49.be902381.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/5.e3885fcf.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/50.da328e34.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/51.6c915d88.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/52.0200c5af.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/53.d3139ee5.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/54.59e84df1.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/55.22b3e22f.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/56.24c00eb1.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/57.d06026c6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/58.e7f80591.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/59.903faa94.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/6.cd1d47c7.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/60.a621fdbb.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/61.bdab1198.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/62.3d1fa5b0.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/63.9ecd7d27.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/64.66141fb6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/65.effed221.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/66.c2ec34a8.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/7.a98c49df.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/8.74213919.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/9.b819e594.js">
    <link rel="stylesheet" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/real-world-functional-programming-book/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/real-world-functional-programming-book/" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part1/" class="sidebar-heading clickable"><span>Part 1: Pure Functions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part2/" class="sidebar-heading clickable router-link-active open"><span>Part 2: Getting and Setting Data</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/real-world-functional-programming-book/part2/trouble_with_dots.html" class="sidebar-link">The Trouble with Dots</a></li><li><a href="/real-world-functional-programming-book/part2/trouble_with_array_access.html" class="sidebar-link">The Trouble with Array Bracket Access</a></li><li><a href="/real-world-functional-programming-book/part2/get.html" class="sidebar-link">get or prop</a></li><li><a href="/real-world-functional-programming-book/part2/set.html" class="sidebar-link">Mutating Data</a></li><li><a href="/real-world-functional-programming-book/part2/lenses.html" class="active sidebar-link">Optic Basics: Lenses</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part2/lenses.html#focus-on-a-property-or-path-and-view-it-in-ramda" class="sidebar-link">Focus on a Property or Path, and View It in Ramda</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part2/lenses.html#set-with-lenses" class="sidebar-link">Set With Lenses</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part2/lenses.html#modification-with-lenses" class="sidebar-link">Modification With Lenses</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part2/lenses.html#conclusions" class="sidebar-link">Conclusions</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part3/" class="sidebar-heading clickable"><span>Part 3: List Comprehensions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part4/" class="sidebar-heading clickable"><span>Part 4: Basic Function Composition</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part5/" class="sidebar-heading clickable"><span>Part 5: Curry and Partial Applications</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part6/" class="sidebar-heading clickable"><span>Part 6: Algebraic Data Types</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part7/" class="sidebar-heading clickable"><span>Part 7: Optics</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part8/" class="sidebar-heading clickable"><span>Part 8: Debugging</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part9/" class="sidebar-heading clickable"><span>Part 9: Testing</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="optic-basics-lenses"><a href="#optic-basics-lenses" class="header-anchor">#</a> Optic Basics: Lenses</h1> <p>To use <code>get</code> and <code>set</code> together, Ramda use lenses. They are a bit lower-level and more specific API's. Lodash handles both <code>Arrays</code> and <code>Objects</code>, whereas you need to do that with separate functions in Ramda. Lenses combine <code>get</code> and <code>set</code> style functionality to navigate and modify large structures by composing smaller functions together.</p> <p>If you hear the word &quot;Optics&quot;, that's what a lot of the Functional people use to refer to lens functionality. We'll cover optics in the <a href="/real-world-functional-programming-book/part8/">Optics chapter</a>.</p> <h2 id="focus-on-a-property-or-path-and-view-it-in-ramda"><a href="#focus-on-a-property-or-path-and-view-it-in-ramda" class="header-anchor">#</a> Focus on a Property or Path, and View It in Ramda</h2> <p>Just like there are 2 functions in Ramda to get a property via <code>prop</code> and get a deeply nested property via <code>path</code>, so too are there 2 lenses to do the same. Unlike Ramda's <code>prop</code> and <code>path</code> (Lodash <code>get</code> does what they both do), functions that return values, a lens is a Type. You call it like any other function to return a configured lens. We'll create some lenses, then use them to &quot;focus&quot; on certain properties and paths of our person Object.</p> <p>Here's our Object:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Jesse Warden'</span><span class="token punctuation">,</span> 
  address<span class="token punctuation">:</span> <span class="token punctuation">{</span> 
      street<span class="token punctuation">:</span> <span class="token string">'123 Cow Ville'</span><span class="token punctuation">,</span> 
      phone<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'123-456-7890'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To focus a lens on the <code>name</code> property, we need to create a prop lens via <code>lensProp</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> lensProp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ramda'</span>

<span class="token keyword">const</span> nameLens <span class="token operator">=</span> <span class="token function">lensProp</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>
</code></pre></div><p>Just like Ramda's <code>prop</code> or Lodash' <code>get</code>, we can see what that lens reveals by passing it to <code>view</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token punctuation">,</span> lensProp<span class="token punctuation">,</span> view <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ramda'</span>
<span class="token operator">...</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">view</span><span class="token punctuation">(</span>nameLens<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Jesse Warden</span>
</code></pre></div><p>For the street, we'll need a path lens via <code>lensPath</code>, and pass that to <code>view</code> as well:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token punctuation">,</span> lensPath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ramda'</span>
<span class="token operator">...</span>
<span class="token keyword">const</span> streetLens <span class="token operator">=</span> <span class="token function">lensPath</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'address'</span><span class="token punctuation">,</span> <span class="token string">'street'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">view</span><span class="token punctuation">(</span>streetLens<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 123 Cow Ville</span>
</code></pre></div><h2 id="set-with-lenses"><a href="#set-with-lenses" class="header-anchor">#</a> Set With Lenses</h2> <p>Using our name lens, let's set the name via Ramda's <code>set</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token punctuation">,</span> <span class="token keyword">set</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ramda'</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">(</span>nameLens<span class="token punctuation">,</span> <span class="token string">'Cow'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// Cow</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// Jesse Warden</span>
</code></pre></div><p>Cool, just like Lodash' <code>set</code>!</p> <p>Using the street lens should yield a similar result:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">(</span>streetLens<span class="token punctuation">,</span> <span class="token string">'21 Jump Street'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>address<span class="token punctuation">.</span>street<span class="token punctuation">)</span> <span class="token comment">// 21 Jump Street</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>address<span class="token punctuation">.</span>street<span class="token punctuation">)</span> <span class="token comment">// 123 Cow Ville</span>
</code></pre></div><h2 id="modification-with-lenses"><a href="#modification-with-lenses" class="header-anchor">#</a> Modification With Lenses</h2> <p>Now that we know how to view our data with our lenses, and use them to set things they're focused on, let's use them to modify data we're focused on in an immutable way using pure functions. Instead of &quot;set it to this new value&quot;, we'll instead &quot;take the value that's there, put it into this function, and whatever comes out, set the new value to that result&quot;. Below will use our lens to run a function on the property and replace it with the value that function returns. It'll then give us a cloned Object back with the modification:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token punctuation">,</span> over<span class="token punctuation">,</span> toLower <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ramda'</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">over</span><span class="token punctuation">(</span>nameLens<span class="token punctuation">,</span> toLower<span class="token punctuation">,</span> person<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// jesse warden</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// Jesse Warden</span>
</code></pre></div><p>In Lodash, the <code>set</code> will modify it with the value you give it. The <code>over</code> in this case will replace it with with whatever function you give it taking the current value as an input, and the output as the new value. Note that it's assumed the function you give it, in this case <code>toLower</code>, is a pure function.</p> <h2 id="conclusions"><a href="#conclusions" class="header-anchor">#</a> Conclusions</h2> <p>This is the basics of lenses. Whether you use Lodash' <code>get</code> and <code>set</code>, or Ramda's <code>view</code> and <code>over</code>, you can start composing these later into bigger functions that loop over large amounts of data, safely, to view and modify it in a pure, immutable way.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/real-world-functional-programming-book/part2/set.html" class="prev">Mutating Data</a></span> <span class="next"><a href="/real-world-functional-programming-book/part3/map.html">Map: 3 things go in, 3 new things come out</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/real-world-functional-programming-book/assets/js/app.0715a213.js" defer></script><script src="/real-world-functional-programming-book/assets/js/2.6da8cf3d.js" defer></script><script src="/real-world-functional-programming-book/assets/js/23.f2ad21f6.js" defer></script>
  </body>
</html>

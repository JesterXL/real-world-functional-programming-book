<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Composition and Tacit Programming</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css" as="style"><link rel="preload" href="/real-world-functional-programming-book/assets/js/app.ad1bfc28.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/2.774c5d42.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/43.66d1dc46.js" as="script"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/10.94dd7f8c.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/11.698c5c4f.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/12.192a3ae6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/13.8386adfa.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/14.25c778d2.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/15.22df2363.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/16.8f2a7f1e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/17.96c3770c.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/18.53fa9806.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/19.ddf2a677.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/20.010d7881.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/21.d4385542.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/22.63c29633.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/23.0b95ec99.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/24.030da7fd.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/25.6075c853.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/26.6e33666c.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/27.52ebbb9a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/28.480e5398.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/29.44aa6890.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/3.ce6d7c8e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/30.36ffc316.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/31.3e451e47.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/32.03e0d851.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/33.15f7a19e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/34.1962de40.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/35.9a9c5557.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/36.649f4a76.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/37.360dc873.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/38.4369e41d.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/39.7b6c045d.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/4.80637c28.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/40.929f8cf3.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/41.5630fa3d.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/42.5eed66fd.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/44.b329c0c4.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/45.c2ff687a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/46.70dbd72b.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/47.e725e0a3.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/48.7b884d6a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/49.f3176d54.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/5.f3fe2246.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/50.1f0d0491.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/51.505f0293.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/52.cec6ae98.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/53.f676af80.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/54.90c93f46.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/55.12ba710b.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/56.c95224bc.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/57.15f55d22.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/58.5dd45008.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/59.67287c0b.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/6.26e4ee07.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/60.60191211.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/7.a98c49df.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/8.74213919.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/9.997a717b.js">
    <link rel="stylesheet" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/real-world-functional-programming-book/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/real-world-functional-programming-book/" class="sidebar-link">Inroduction</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part1/" class="sidebar-heading clickable"><span>Part 1: Pure Functions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part2/" class="sidebar-heading clickable"><span>Part 2: Getting and Setting Data</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part3/" class="sidebar-heading clickable"><span>Part 3: List Comprehensions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part4/" class="sidebar-heading clickable"><span>Part 4: Curry and Partial Applications</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part5/" class="sidebar-heading clickable router-link-active open"><span>Part 5: Composition</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/real-world-functional-programming-book/part5/passing_functions_to_functions.html" class="sidebar-link">Passing Functions To Functions</a></li><li><a href="/real-world-functional-programming-book/part5/composing_functions.html" class="sidebar-link">Composing Functions</a></li><li><a href="/real-world-functional-programming-book/part5/tacit_programming.html" class="active sidebar-link">Composition and Tacit Programming</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part5/tacit_programming.html#map-and-get" class="sidebar-link">map and get</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part5/tacit_programming.html#pro-s-and-con-s" class="sidebar-link">Pro's and Con's</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part5/tacit_programming.html#validating-data" class="sidebar-link">Validating Data</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part5/tacit_programming.html#default-values-via-getor-with-filtering" class="sidebar-link">Default Values via getOr with Filtering</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part5/tacit_programming.html#getor" class="sidebar-link">getOr</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part5/tacit_programming.html#using-getor-and-flow-with-filter" class="sidebar-link">Using getOr and flow with filter</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part5/tacit_programming.html#isequal" class="sidebar-link">isEqual</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part5/tacit_programming.html#flow" class="sidebar-link">Flow</a></li></ul></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part5/tacit_programming.html#conclusions" class="sidebar-link">Conclusions</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part6/" class="sidebar-heading clickable"><span>Part 6: Algebraic Data Types</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part7/" class="sidebar-heading clickable"><span>Part 7: Optics</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part8/" class="sidebar-heading clickable"><span>Part 8: Debugging</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part9/" class="sidebar-heading clickable"><span>Part 9: Testing</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="composition-and-tacit-programming"><a href="#composition-and-tacit-programming" class="header-anchor">#</a> Composition and Tacit Programming</h1> <p><a href="https://en.wikipedia.org/wiki/Tacit_programming" target="_blank" rel="noopener noreferrer">Tacit Programming<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, which also goes by the name of point-free style, is a way to write functions without specifying their arguments. It's useful for:</p> <ul><li>to write less code</li> <li>to help in composition of functions</li> <li>same reason you use partial applications in reducing the amount of arguments you need to provide</li></ul> <h2 id="map-and-get"><a href="#map-and-get" class="header-anchor">#</a> map and get</h2> <p>We've already covered using curried functions from the <a href="/real-world-functional-programming-book/part5/lodash_fp.html">Lodash FP section</a> to reduce the amount of code you can write and to create re-usable functions from partial applications.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// lodash</span>
<span class="token keyword">const</span> <span class="token function-variable function">getNames</span> <span class="token operator">=</span> <span class="token parameter">party</span> <span class="token operator">=&gt;</span> <span class="token function">map</span><span class="token punctuation">(</span>
    party<span class="token punctuation">,</span> 
    <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token keyword">get</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// lodash/fp</span>
<span class="token keyword">const</span> getNames <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Those partial applications used in the lodash/fp example don't define their function parameters. Below, we compare the point style where they define the arguments, and point-free where they don't, even when using lodash/fp:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// point style</span>
<span class="token keyword">const</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> object<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">mapNames</span> <span class="token operator">=</span> <span class="token parameter">party</span> <span class="token operator">=&gt;</span> <span class="token function">map</span><span class="token punctuation">(</span>getName<span class="token punctuation">,</span> party<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">getNames</span> <span class="token operator">=</span> <span class="token parameter">party</span> <span class="token operator">=&gt;</span> <span class="token function">mapNames</span><span class="token punctuation">(</span>party<span class="token punctuation">)</span>

<span class="token comment">// point-free style</span>
<span class="token keyword">const</span> getName <span class="token operator">=</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> mapNames <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span>getNames<span class="token punctuation">)</span>
<span class="token keyword">const</span> getNames <span class="token operator">=</span> mapNames
</code></pre></div><h2 id="pro-s-and-con-s"><a href="#pro-s-and-con-s" class="header-anchor">#</a> Pro's and Con's</h2> <p>There are 3 upsides to using point-free:</p> <ol><li>less code</li> <li>sometimes less wasted functions</li> <li>sometimes you create re-usable functions</li></ol> <p>The <code>map(get('name'))</code> is much less code than <code>map(party, person =&gt; get(person, 'name'))</code>, and we don't have to create functions merely to ensure the arguments are in the right order. Assuming the common stuff is the left/first parameter, we can create a lot of re-usable functions using partial applications by only passing in some of the arguments to curried functions.</p> <p>There are 3 downsides to point-free, specific to dynamic languages:</p> <ol><li>memorize function signatures</li> <li>no types nor runtime assertions</li> <li>it's an extra step of &quot;thinking&quot;</li></ol> <p>Do you know what <code>get</code>'s function signature is? And <code>map</code>'s? We've just covered it. How about <code>reduce</code> in lodash/fp instead of lodash? When you see <code>map(get('name'))</code>, you have to have memorized what the function signatures are for <code>get</code> and <code>map</code>. If you haven't, then you have to go look them up, else you don't understand the code. One could argue you have the same problem for any abstraction, but do you have to do the same for this?</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token parameter">object</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> object<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">getNamesFromListOfObjects</span> <span class="token operator">=</span> <span class="token parameter">party</span> <span class="token operator">=&gt;</span>
    <span class="token function">map</span><span class="token punctuation">(</span>
        <span class="token parameter">member</span> <span class="token operator">=&gt;</span> <span class="token function">getName</span><span class="token punctuation">(</span>member<span class="token punctuation">)</span><span class="token punctuation">,</span>
        party
    <span class="token punctuation">)</span>
</code></pre></div><p>None of those functions are needed using lodash/fp, but we used them to be more clear in what the code does. So you don't have to memorize the function signatures, nor force those reading your code to memorize them too. You don't have to think because the functions clearly list their function arguments, and use adjectives to give you hints as to what they are and what they might return. In dynamic languages where there are no types to help you and intellisense in your IDE is of varying quality, being verbose like this can lead to much more readable code.</p> <p>Let's give a few more examples to see if you like it or not. Sometimes you'll just have to pick and choose where you use it.</p> <h2 id="validating-data"><a href="#validating-data" class="header-anchor">#</a> Validating Data</h2> <p>Let's validate data using lodash/fp in a point and point-free styles so we can contrast them. Validating data in dynamic languages typically is saying &quot;does it look like the Object I want?&quot; Unlike typed languages where &quot;it must be this type&quot; whether at compile time or runtime, in dynamic languages, you're like &quot;if it has a <code>then</code>, it's probably something that that acts like a Promise, so we can treat it like one in our system; good enough for government work!&quot;. You'll do this a lot when parsing data in API's.</p> <p>Our data:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Jesse Warden'</span><span class="token punctuation">,</span>
    address<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        street<span class="token punctuation">:</span> <span class="token string">'123 Cow Ville'</span><span class="token punctuation">,</span>
        phone<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">'123-555-1234'</span><span class="token punctuation">,</span>
            <span class="token string">'999-555-8234'</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We'll use <code>has</code> to verify the Object has a property we expect to find, and <code>every</code> to run through all the properties we're looking for. As long as it found all the properties, the Object is probably ok.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> has<span class="token punctuation">,</span> every <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/fp'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">legitPerson</span> <span class="token operator">=</span> <span class="token parameter">person</span> <span class="token operator">=&gt;</span>
    <span class="token function">every</span><span class="token punctuation">(</span>
        <span class="token parameter">hasResult</span> <span class="token operator">=&gt;</span> hasResult <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
            <span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'address.street'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'address.phone[0]'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">legitPerson</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>We can reduce how verbose it is using point-free style on the <code>has</code>. Instead of populating the Array with a bunch of Booleans, we can instead populate it with a bunch of Functions. We still keep the original <code>legitPerson</code> point style, but at least reduce the contents of the function:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">legitPerson</span> <span class="token operator">=</span> <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token function">every</span><span class="token punctuation">(</span>
    <span class="token parameter">predicate</span> <span class="token operator">=&gt;</span> <span class="token function">predicate</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'address.street'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'address.phone[0]'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">legitPerson</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="default-values-via-getor-with-filtering"><a href="#default-values-via-getor-with-filtering" class="header-anchor">#</a> Default Values via getOr with Filtering</h2> <h3 id="getor"><a href="#getor" class="header-anchor">#</a> getOr</h3> <p>Sometimes you want default values in case what you're trying to get doesn't exist. We've covered <code>get</code> in <a href="/real-world-functional-programming-book/part5/part2/get.html">Part 2: Get</a>, which allows you to safely get data. If the data isn't there, it'll return <code>undefined</code>. If you want to use default values in the case of <code>undefined</code>, however, it's a bit unwieldy:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash/fp'</span>

<span class="token keyword">const</span> <span class="token function-variable function">getPersonType</span> <span class="token operator">=</span> <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> <span class="token string">'unknown'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><p>We can instead use <code>getOr</code> to say &quot;Maybe there is a value there... if it is, great, use it, otherwise just use the default.&quot;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getOr <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash/fp'</span>

<span class="token keyword">const</span> <span class="token function-variable function">getPersonType</span> <span class="token operator">=</span> <span class="token parameter">person</span> <span class="token operator">=&gt;</span>
  <span class="token function">getOr</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
</code></pre></div><p>Or point-free:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> getPersonType <span class="token operator">=</span> <span class="token function">getOr</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">)</span>
</code></pre></div><p>I should point out, the regular Lodash version reads more naturally: &quot;from this Object, get the 'type', or just use 'unknown'&quot; whereas lodash/fp reads &quot;If we don't find anything use 'unknown', when looking for the 'type' property, on this Object&quot;. Lesson: Curry friendly doesn't always mean reader friendly.</p> <h3 id="using-getor-and-flow-with-filter"><a href="#using-getor-and-flow-with-filter" class="header-anchor">#</a> Using getOr and flow with filter</h3> <p>Point-free can either really help if you've memorized the API, or really harm, when you start composing functions together. As they get larger, you can prevent this from being too verbose via point-free style. Below we'll filter a list by only getting the humans using <code>getOr</code> and <code>filter</code>. Below is our needed imports and <code>party</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> getOr<span class="token punctuation">,</span> filter <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash/fp'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> party <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Jesse'</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token string">'human'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Brandy'</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token string">'human'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'Albus'</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token string">'dawg'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>We'll use <code>filter</code> in a point style to only get the humans:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">filterHumans</span> <span class="token operator">=</span> <span class="token parameter">people</span> <span class="token operator">=&gt;</span>
    <span class="token function">filter</span><span class="token punctuation">(</span>
        <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token function">getOr</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'human'</span><span class="token punctuation">,</span>
        people
    <span class="token punctuation">)</span>
</code></pre></div><p>Running it against the <code>party</code>, we get:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">filterHumans</span><span class="token punctuation">(</span>party<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [ { name: 'Jesse', type: 'human' },</span>
<span class="token comment">//   { name: 'Brandy', type: 'human' } ]</span>
</code></pre></div><p>If we rewrote that in point-free style, we could remove the <code>people</code> parameter because <code>filter</code> is already curried by default, and expects the Array as the 2nd parameter:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> filterHumans <span class="token operator">=</span>
    <span class="token function">filter</span><span class="token punctuation">(</span>
        <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token function">getOr</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'human'</span>
    <span class="token punctuation">)</span>
</code></pre></div><p>We can't further make it point-free without creating some additional pure functions, namely the predicate we pass to filter. Let's shrink <code>getOr</code> to be point-free first:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// from</span>
<span class="token keyword">const</span> <span class="token function-variable function">getTypeOrUnknown</span> <span class="token operator">=</span> <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token function">getOr</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
<span class="token comment">// to</span>
<span class="token keyword">const</span> getTypeOrUnknown <span class="token operator">=</span> <span class="token function">getOr</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">)</span>
</code></pre></div><p>Now we can put that into our <code>filter</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> getTypeOrUnknown <span class="token operator">=</span> <span class="token function">getOr</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> filterHumans <span class="token operator">=</span>
    <span class="token function">filter</span><span class="token punctuation">(</span>
        <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token function">getTypeOrUnknown</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'human'</span>
    <span class="token punctuation">)</span>
</code></pre></div><h3 id="isequal"><a href="#isequal" class="header-anchor">#</a> isEqual</h3> <p>Almost all operators in JavaScript have equivalent pure function versions of them in lodash/fp. Operators work well and should used, but they do not compose as well as functions do. The <code>isEqual</code> is like <code>===</code>, just a function. We can replace the <code>thing === 'human'</code> with <code>isEqual</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// point style</span>
<span class="token keyword">const</span> <span class="token function-variable function">equalsHuman</span> <span class="token operator">=</span> <span class="token parameter">thing</span> <span class="token operator">=&gt;</span> <span class="token function">isEqual</span><span class="token punctuation">(</span><span class="token string">'human'</span><span class="token punctuation">,</span> thing<span class="token punctuation">)</span>

<span class="token comment">// point-free style</span>
<span class="token keyword">const</span> equalsHuman <span class="token operator">=</span> <span class="token function">isEqual</span><span class="token punctuation">(</span><span class="token string">'human'</span><span class="token punctuation">)</span>
</code></pre></div><p>Using that in our <code>filter</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> getTypeOrUnknown <span class="token operator">=</span> <span class="token function">getOr</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> equalsHuman <span class="token operator">=</span> <span class="token function">isEqual</span><span class="token punctuation">(</span><span class="token string">'human'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> filterHumans <span class="token operator">=</span>
    <span class="token function">filter</span><span class="token punctuation">(</span>
        <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token function">equalsHuman</span><span class="token punctuation">(</span><span class="token function">getTypeOrUnknown</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</code></pre></div><p>Great, one function left.</p> <h3 id="flow"><a href="#flow" class="header-anchor">#</a> Flow</h3> <p>However, you see the nesting up there? The <code>equalsHuman(getTypeOrUnknown(person))</code> part. Once you have 2 or more functions nested like this, you can break them into a line using <code>flow</code>. It allows you to compose functions into a chain or set of pipes, just like Promises do, but synchronously. See the previous chapter <a href="/real-world-functional-programming-book/part5/composing_functions.html">composing functions</a> for a refresh on how <code>flow</code> works.</p> <p>To make the filter predicate point-free, we have to remove that <code>person</code> parameter. The only way to do that is to write a function that wraps <code>equalsHuman</code> and <code>getTypeOrUnknown</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isHuman</span> <span class="token operator">=</span> <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token function">equalsHuman</span><span class="token punctuation">(</span><span class="token function">getTypeOrUnknown</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>... but he isn't point-free. Let's use <code>flow</code>:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isHuman</span> <span class="token operator">=</span> <span class="token parameter">person</span> <span class="token operator">=&gt;</span> <span class="token function">flow</span><span class="token punctuation">(</span><span class="token punctuation">[</span>getTypeOrUnknown<span class="token punctuation">,</span> equalsHuman<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</code></pre></div><p>And then the point-free version:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> isHuman <span class="token operator">=</span> <span class="token function">flow</span><span class="token punctuation">(</span><span class="token punctuation">[</span>getTypeOrUnknown<span class="token punctuation">,</span> equalsHuman<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>Now, using that in our <code>filter</code> to make all of it point-free:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> getTypeOrUnknown <span class="token operator">=</span> <span class="token function">getOr</span><span class="token punctuation">(</span><span class="token string">'unknown'</span><span class="token punctuation">,</span> <span class="token string">'type'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> equalsHuman <span class="token operator">=</span> <span class="token function">isEqual</span><span class="token punctuation">(</span><span class="token string">'human'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> isHuman <span class="token operator">=</span> <span class="token function">flow</span><span class="token punctuation">(</span><span class="token punctuation">[</span>getTypeOrUnknown<span class="token punctuation">,</span> equalsHuman<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> filterHumans <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span>isHuman<span class="token punctuation">)</span>
</code></pre></div><h2 id="conclusions"><a href="#conclusions" class="header-anchor">#</a> Conclusions</h2> <p>Point-free style can significantly reduce the amount of code you have to write, and often happens when you use a lot of partial applications. The cost is increased cognitive load: it makes you think more when reading it unless you abstract it. Most of what we you do as a programmer is read code, not write it. That's why some people call point-free programming &quot;pointless programming&quot;.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/real-world-functional-programming-book/part5/composing_functions.html" class="prev">Composing Functions</a></span> <span class="next"><a href="/real-world-functional-programming-book/part6/maybe.html">/part6/maybe.html</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/real-world-functional-programming-book/assets/js/app.ad1bfc28.js" defer></script><script src="/real-world-functional-programming-book/assets/js/2.774c5d42.js" defer></script><script src="/real-world-functional-programming-book/assets/js/43.66d1dc46.js" defer></script>
  </body>
</html>

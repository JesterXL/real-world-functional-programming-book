<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Partial Applications</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css" as="style"><link rel="preload" href="/real-world-functional-programming-book/assets/js/app.ad1bfc28.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/2.774c5d42.js" as="script"><link rel="preload" href="/real-world-functional-programming-book/assets/js/38.4369e41d.js" as="script"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/10.94dd7f8c.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/11.698c5c4f.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/12.192a3ae6.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/13.8386adfa.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/14.25c778d2.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/15.22df2363.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/16.8f2a7f1e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/17.96c3770c.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/18.53fa9806.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/19.ddf2a677.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/20.010d7881.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/21.d4385542.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/22.63c29633.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/23.0b95ec99.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/24.030da7fd.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/25.6075c853.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/26.6e33666c.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/27.52ebbb9a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/28.480e5398.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/29.44aa6890.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/3.ce6d7c8e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/30.36ffc316.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/31.3e451e47.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/32.03e0d851.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/33.15f7a19e.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/34.1962de40.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/35.9a9c5557.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/36.649f4a76.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/37.360dc873.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/39.7b6c045d.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/4.80637c28.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/40.929f8cf3.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/41.5630fa3d.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/42.5eed66fd.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/43.66d1dc46.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/44.b329c0c4.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/45.c2ff687a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/46.70dbd72b.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/47.e725e0a3.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/48.7b884d6a.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/49.f3176d54.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/5.f3fe2246.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/50.1f0d0491.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/51.505f0293.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/52.cec6ae98.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/53.f676af80.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/54.90c93f46.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/55.12ba710b.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/56.c95224bc.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/57.15f55d22.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/58.5dd45008.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/59.67287c0b.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/6.26e4ee07.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/60.60191211.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/7.a98c49df.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/8.74213919.js"><link rel="prefetch" href="/real-world-functional-programming-book/assets/js/9.997a717b.js">
    <link rel="stylesheet" href="/real-world-functional-programming-book/assets/css/0.styles.dda700b8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/real-world-functional-programming-book/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/real-world-functional-programming-book/" class="sidebar-link">Inroduction</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part1/" class="sidebar-heading clickable"><span>Part 1: Pure Functions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part2/" class="sidebar-heading clickable"><span>Part 2: Getting and Setting Data</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part3/" class="sidebar-heading clickable"><span>Part 3: List Comprehensions</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part4/" class="sidebar-heading clickable router-link-active open"><span>Part 4: Curry and Partial Applications</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/real-world-functional-programming-book/part4/curry.html" class="sidebar-link">Curry: All Functions Take 1 Argument</a></li><li><a href="/real-world-functional-programming-book/part4/parameter_order.html" class="sidebar-link">Known Knowns, and Known Unknowns</a></li><li><a href="/real-world-functional-programming-book/part4/partial_application.html" class="active sidebar-link">Partial Applications</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part4/partial_application.html#curried-functions-make-partial-applications" class="sidebar-link">Curried Functions Make Partial Applications</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part4/partial_application.html#making-your-own-partial-applications" class="sidebar-link">Making Your Own Partial Applications</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part4/partial_application.html#partial-application-with-no-arguments" class="sidebar-link">Partial Application With No Arguments</a></li><li class="sidebar-sub-header"><a href="/real-world-functional-programming-book/part4/partial_application.html#fixing-argument-order-with-partialright" class="sidebar-link">Fixing Argument Order with partialRight</a></li></ul></li><li><a href="/real-world-functional-programming-book/part4/closures_and_immutability.html" class="sidebar-link">Closures And Immutability</a></li><li><a href="/real-world-functional-programming-book/part4/arity.html" class="sidebar-link">How Many Arguments Does a Function Take</a></li><li><a href="/real-world-functional-programming-book/part4/styles_of_curry.html" class="sidebar-link">Different Styles of Curry</a></li><li><a href="/real-world-functional-programming-book/part4/lodash_fp.html" class="sidebar-link">The 5 Stages of Learning Function Currying</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part5/" class="sidebar-heading clickable"><span>Part 5: Composition</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part6/" class="sidebar-heading clickable"><span>Part 6: Algebraic Data Types</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part7/" class="sidebar-heading clickable"><span>Part 7: Optics</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part8/" class="sidebar-heading clickable"><span>Part 8: Debugging</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/real-world-functional-programming-book/part9/" class="sidebar-heading clickable"><span>Part 9: Testing</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="partial-applications"><a href="#partial-applications" class="header-anchor">#</a> Partial Applications</h1> <p>Partial applications are functions with some of their arguments already given. You've already seen these types of functions in the <a href="/real-world-functional-programming-book/part4/curry.html">Curry</a> section, they just didn't have a name until now.</p> <p>They're useful for:</p> <ul><li>you don't have a choice, this is what curried functions return, lol</li> <li>used in function composition and chaining</li> <li>being more explicit when you want to use default parameters, yet still support pure, curried functions</li> <li>helping in debugging</li> <li>reducing the number of arguments you need for a function</li> <li>using them as arguments to other functions to further reduce their argument count</li> <li>exposing functions to developers to use with all the concrete modules/classes already included</li></ul> <h2 id="curried-functions-make-partial-applications"><a href="#curried-functions-make-partial-applications" class="header-anchor">#</a> Curried Functions Make Partial Applications</h2> <p>This is a manually curried function:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">loadWebsite</span> <span class="token operator">=</span> <span class="token parameter">request</span> <span class="token operator">=&gt;</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token parameter">success<span class="token punctuation">,</span> failure</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> response<span class="token punctuation">,</span> html</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            error
            <span class="token operator">?</span> <span class="token function">failure</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">:</span> <span class="token function">success</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</code></pre></div><p>The function it returns is a partial application:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> imAPartialApplication <span class="token operator">=</span> <span class="token function">loadWebsite</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
</code></pre></div><p>From our logs, it appears that our <code>imAPartialApplication</code> is actually just a function that takes 1 argument:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// url =&gt;</span>
<span class="token comment">//     new Promise( ( success, failure ) =&gt;</span>
<span class="token comment">//         request.get(url, (error, response, html) =&gt;</span>
<span class="token comment">//             error</span>
<span class="token comment">//             ? failure(error)</span>
<span class="token comment">//             : success(html)</span>
<span class="token comment">//         )</span>
<span class="token comment">//     )</span>
</code></pre></div><p>But in actuality, it's the <code>loadURL</code> function below. While <code>console.log</code> will only show the <code>loadURL</code> portion, you and I know how closures work, and that <code>request</code> parameter value is up there, already defined, and waiting for <code>loadURL</code> to run and reference it.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">loadWebsite</span> <span class="token operator">=</span> <span class="token parameter">request</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">loadURL</span> <span class="token operator">=</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token parameter">success<span class="token punctuation">,</span> failure</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> response<span class="token punctuation">,</span> html</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            error
            <span class="token operator">?</span> <span class="token function">failure</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">:</span> <span class="token function">success</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> loadURL
<span class="token punctuation">}</span>
</code></pre></div><h2 id="making-your-own-partial-applications"><a href="#making-your-own-partial-applications" class="header-anchor">#</a> Making Your Own Partial Applications</h2> <p>You can certainly make your own without using curried functions. The cliche say hello function:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">yo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Sup </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">return</span> yo
<span class="token punctuation">}</span>
<span class="token keyword">const</span> heyJesse <span class="token operator">=</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token string">'Jesse'</span><span class="token punctuation">)</span>
<span class="token function">heyJesse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Sup Jesse!</span>
</code></pre></div><p>You can use it build more dynamic ones, in the case of detecting if a browser supports the native <code>fetch</code> or not:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> polyfill <span class="token keyword">from</span> <span class="token string">'cross-fetch'</span>

<span class="token keyword">const</span> <span class="token function-variable function">loadJSON</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fetch<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">loadJSONWithFetch</span> <span class="token operator">=</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">browserSupportsFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token function">loadJSON</span><span class="token punctuation">(</span>fetch<span class="token punctuation">,</span> url<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Dude, use a newer browser... please, beg your IT Admin. Your boss. Anyone.&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token function">loadJSON</span><span class="token punctuation">(</span>polyfill<span class="token punctuation">,</span> url<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>loadJSONWithFetch</code> will return a partial application. If a browser supports the native <code>fetch</code>, it'll return a <code>loadJSON</code> function that uses the native <code>fetch</code> and is waiting for you supply the URL. Otherwise, it returns one that uses the polyfill and logs a warning to the console output. Users won't see this, but it's therapeutic.</p> <h1 id="creating-partial-applications-using-partial"><a href="#creating-partial-applications-using-partial" class="header-anchor">#</a> Creating Partial Applications Using partial</h1> <p>Lodash and Ramda also have ways of creating these in a pure way. If we have the <code>loadWebsite</code> non-curried function:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">loadWebsite</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token parameter">success<span class="token punctuation">,</span> failure</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> response<span class="token punctuation">,</span> html</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            error
            <span class="token operator">?</span> <span class="token function">failure</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">:</span> <span class="token function">success</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</code></pre></div><p>While it's pure and allows us to easily unit test it by stubbing <code>request</code>, we want to expose it as a public function in our API with <code>request</code> baked in. That way, users can just go <code>loadWebsite('my url')</code> vs. having to import <code>request</code>.</p> <p>If it were curried, we could just do this:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Node's CommonJS</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    loadWebsite<span class="token punctuation">:</span> <span class="token function">loadWebsite</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES6</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> loadWebsiteWithRequest <span class="token operator">=</span> <span class="token function">loadWebsite</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
</code></pre></div><p>Instead rewriting the function to be manually curried, or using of the various <code>curry</code> functions Lodash, Ramda, and other libraries have, we can instead just create a partial directly using the <code>partial</code> function from Lodash.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Node's CommonJS</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> partial <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    loadWebsite<span class="token punctuation">:</span> <span class="token function">partial</span><span class="token punctuation">(</span>loadWebsite<span class="token punctuation">,</span> <span class="token punctuation">[</span>request<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES6</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> partial <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> loadWebsiteWithRequest <span class="token operator">=</span> <span class="token function">partial</span><span class="token punctuation">(</span>loadWebsite<span class="token punctuation">,</span> <span class="token punctuation">[</span>request<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>If you were to write that manually, without currying or partial applications, while impure, it'd be:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Node's CommonJS</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">loadWebsite</span><span class="token punctuation">:</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token function">loadWebsite</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> url<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES6</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">loadWebsiteWithRequest</span> <span class="token operator">=</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token function">loadWebsite</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> url<span class="token punctuation">)</span>
</code></pre></div><p>This is being polite to the developers using our code.</p> <p>If we just did:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> loadWebsite <span class="token punctuation">}</span>
</code></pre></div><p>Then the developer would have to first import the <code>request</code> module to make our module work:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> loadWebsite <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./loaders'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">)</span>

<span class="token function">loadWebsite</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'http://jessewarden.com'</span><span class="token punctuation">)</span>
</code></pre></div><p>Lame! Since we've exposed partial applications, they have to do less work, yet we've ensured we're still creating pure functions for unit testing and for others to use:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> loadWebsite <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./loaders'</span><span class="token punctuation">)</span>

<span class="token function">loadWebsite</span><span class="token punctuation">(</span><span class="token string">'http://jessewarden.com'</span><span class="token punctuation">)</span>
</code></pre></div><p>You'll often expose both functions, usually only for testing purposes:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    loadWebsite<span class="token punctuation">,</span>
    loadWebsiteWithRequest<span class="token punctuation">:</span> <span class="token function">partial</span><span class="token punctuation">(</span>loadWebsite<span class="token punctuation">,</span> <span class="token punctuation">[</span>request<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES6</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> loadWebsite <span class="token operator">=</span> <span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> loadWebsiteWithRequest <span class="token operator">=</span> <span class="token function">partial</span><span class="token punctuation">(</span>loadWebsite<span class="token punctuation">,</span> <span class="token punctuation">[</span>request<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="partial-application-with-no-arguments"><a href="#partial-application-with-no-arguments" class="header-anchor">#</a> Partial Application With No Arguments</h2> <p>While <code>partial</code> is a pure way to create partial applications without using currying, it can also create partial applications that take no arguments, something you can't do with currying. You can use this technique for integration testing using the unit test runner <a href="https://mochajs.org/" target="_blank" rel="noopener noreferrer">Mocha<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Assuming you have 2 REST API's for <code>/ping</code> and <code>/get/users</code> running on localhost:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> ping <span class="token operator">=</span> <span class="token function">partial</span><span class="token punctuation">(</span>loadWebsite<span class="token punctuation">,</span> <span class="token punctuation">[</span>request<span class="token punctuation">,</span> <span class="token string">'http://localhost:3000/ping'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> getUsers <span class="token operator">=</span> <span class="token function">partial</span><span class="token punctuation">(</span>loadWebsite<span class="token punctuation">,</span> <span class="token punctuation">[</span>request<span class="token punctuation">,</span> <span class="token string">'http://localhost:3000/get/users'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// if ping responds, we can start running integration tests,</span>
    <span class="token comment">// otherwise, if the server isn't up, no point in running the tests.</span>
    <span class="token keyword">return</span> <span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'when /get/users is called, it should get a list of users'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">getUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">users</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>users<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstName<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span>be<span class="token punctuation">.</span>empty
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="fixing-argument-order-with-partialright"><a href="#fixing-argument-order-with-partialright" class="header-anchor">#</a> Fixing Argument Order with partialRight</h2> <p>We saw in the <a href="/real-world-functional-programming-book/part4/parameter_order.html">Parameter Order</a> section that the curried function had the arguments in a non-useful order. We used a function closure to create our own partial application:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">loadJSON</span> <span class="token operator">=</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token parameter">fetch</span> <span class="token operator">=&gt;</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">loadJSONWithFetch</span> <span class="token operator">=</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token function">loadJSON</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>
</code></pre></div><p>We baked in <code>fetch</code> above, all you need to supply is the <code>url</code>. While we wanted <code>loadJSON</code> to have <code>fetch</code> first, instead of changing the function, we just fix it with <code>loadJSONWithFetch</code> fixing the order of the arguments by abstracting that away from us.</p> <p>However, <code>loadJSONWithFetch</code> isn't pure because the <code>fetch</code> isn't declared in the arguments. We can't make it pure using <code>partial</code> because she starts putting in arguments from the left:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> loadJSONWithFetch <span class="token operator">=</span> <span class="token function">partial</span><span class="token punctuation">(</span>loadJSON<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span> er<span class="token punctuation">,</span> what <span class="token keyword">do</span> <span class="token constant">I</span> put here<span class="token punctuation">,</span> fetch<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>Thankfully, there is something called <code>partialRight</code>, which instead of preloading arguments from left to right... it'll instead start from right to left.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> partialRight <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> loadJSONWithFetch <span class="token operator">=</span> <span class="token function">partialRight</span><span class="token punctuation">(</span>loadJSON<span class="token punctuation">,</span> <span class="token punctuation">[</span>fetch<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>The closure version of that would look like:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">loadJSONWithFetch</span> <span class="token operator">=</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token function">loadJSON</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> fetch<span class="token punctuation">)</span>
</code></pre></div><p>Now you can call it with the <code>url</code> at your leisure:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">loadJSONWithFetch</span><span class="token punctuation">(</span><span class="token string">'http://jessewarden.com'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
</code></pre></div><p>The <code>partialRight</code> is pure unlike the closure which is not, and can support functions that are written with static things that are on the right (latter/last in the argument list) instead of left (first or early in the parameter list).</p> <p>If it's 3rd party code, or you're on a deadline, <code>partialRight</code> can be a lifesaver. If it's your code, fix the parameter order instead of using this function.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/real-world-functional-programming-book/part4/parameter_order.html" class="prev">Known Knowns, and Known Unknowns</a></span> <span class="next"><a href="/real-world-functional-programming-book/part4/closures_and_immutability.html">Closures And Immutability</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/real-world-functional-programming-book/assets/js/app.ad1bfc28.js" defer></script><script src="/real-world-functional-programming-book/assets/js/2.774c5d42.js" defer></script><script src="/real-world-functional-programming-book/assets/js/38.4369e41d.js" defer></script>
  </body>
</html>
